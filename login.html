<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module 1: Patient Management</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');
@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css');

/* BASE */
body {
    font-family: 'Roboto', sans-serif;
    margin:0;
    background: #f4f7f9;
    padding:20px;
}
h1 {
    color:#4e73df;
    text-align:center;
    display:flex;
    justify-content:center;
    align-items:center;
    gap:10px;
    margin-bottom:20px;
    animation: bounce 1s infinite alternate;
}
@keyframes bounce {
    from {transform: translateY(0);}
    to {transform: translateY(-5px);}
}

/* CONTAINER */
.container {
    max-width: 900px;
    margin: auto;
}

/* CARD */
.card {
    background:white;
    padding:25px;
    border-radius:15px;
    box-shadow:0 10px 25px rgba(0,0,0,0.1);
    margin-bottom:25px;
    animation: fadeIn 0.5s ease;
}
@keyframes fadeIn { from{opacity:0; transform: translateY(10px);} to{opacity:1; transform: translateY(0);} }

/* FORM GRID */
.form-grid {
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(200px,1fr));
    gap:15px;
}
.input-group { display:flex; flex-direction:column; position:relative; }
.input-group i { position:absolute; top:50%; left:10px; transform:translateY(-50%); color:#4e73df; }
input, select, textarea {
    padding:10px 10px 10px 35px;
    border-radius:8px;
    border:1px solid #ccc;
    outline:none;
    font-size:14px;
}
input:focus, select:focus, textarea:focus { border-color:#4e73df; box-shadow:0 0 6px rgba(78,115,223,0.4); }

/* BUTTON */
.btn { padding:10px 15px; border:none; border-radius:8px; cursor:pointer; font-weight:600; transition:0.3s; }
.btn-add { background:#4e73df; color:white; width:100%; margin-top:10px; }
.btn-add:hover { background:#2e59d9; transform: translateY(-2px); box-shadow:0 6px 12px rgba(0,0,0,0.15); }

/* PATIENT CARDS */
.card-container { display:grid; grid-template-columns: repeat(auto-fit,minmax(250px,1fr)); gap:15px; }
.patient-card {
    background:#f1f5f9;
    padding:15px 20px;
    border-radius:12px;
    position:relative;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
    animation: slideUp 0.5s ease forwards;
}
.patient-card h3 { margin:0 0 10px 0; color:#4e73df; }
.patient-card p { margin:3px 0; font-size:14px; }
.card-buttons { position:absolute; top:10px; right:10px; display:flex; gap:10px; }
.card-buttons i { cursor:pointer; color:#4e73df; transition:0.3s; }
.card-buttons i:hover { color:#1cc88a; transform:scale(1.2); }

@keyframes slideUp { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }

</style>
</head>
<body>

<h1><i class="fa fa-hospital"></i> Patient Management</h1>

<div class="container">

    <!-- PATIENT FORM -->
    <div class="card">
        <h2>Add / Update Patient</h2>
        <div class="form-grid">
            <div class="input-group"><i class="fa fa-user"></i><input type="text" id="name" placeholder="Full Name"></div>
            <div class="input-group"><i class="fa fa-calendar"></i><input type="number" id="age" placeholder="Age"></div>
            <div class="input-group"><i class="fa fa-venus-mars"></i>
                <select id="gender"><option value="">Select Gender</option><option>Male</option><option>Female</option></select>
            </div>
            <div class="input-group"><i class="fa fa-envelope"></i><input type="email" id="email" placeholder="Email"></div>
            <div class="input-group"><i class="fa fa-phone"></i><input type="tel" id="contact" placeholder="Phone"></div>
            <div class="input-group"><i class="fa fa-tint"></i><input type="text" id="blood" placeholder="Blood Group"></div>
            <div class="input-group" style="grid-column:1/-1;"><i class="fa fa-home"></i><input type="text" id="address" placeholder="Address"></div>
            <div class="input-group" style="grid-column:1/-1;"><i class="fa fa-notes-medical"></i><textarea id="history" rows="3" placeholder="Medical History"></textarea></div>
        </div>
        <button id="addBtn" class="btn btn-add">Add Patient</button>
    </div>

    <!-- PATIENT CARDS -->
    <div class="card card-container" id="patientList"></div>

</div>

<script>
let editingIndex = null;

function loadPatients(){
    const container = document.getElementById('patientList');
    container.innerHTML='';
    let patients = JSON.parse(localStorage.getItem('patients') || '[]');

    patients.forEach((p,index)=>{
        const card = document.createElement('div');
        card.className='patient-card';
        card.innerHTML=`
            <h3>${p.name}</h3>
            <p><strong>Age:</strong> ${p.age}</p>
            <p><strong>Gender:</strong> ${p.gender}</p>
            <p><strong>Email:</strong> ${p.email}</p>
            <p><strong>Phone:</strong> ${p.contact}</p>
            <p><strong>Blood Group:</strong> ${p.blood}</p>
            <p><strong>Address:</strong> ${p.address}</p>
            <p><strong>Medical History:</strong> ${p.history}</p>
            <div class="card-buttons">
                <i class="fa fa-edit" title="Edit" onclick="editPatient(${index})"></i>
                <i class="fa fa-trash" title="Delete" onclick="deletePatient(${index})"></i>
            </div>
        `;
        container.appendChild(card);
    });
}

function clearForm(){
    ['name','age','gender','email','contact','blood','address','history'].forEach(id=>document.getElementById(id).value='');
    editingIndex = null;
    document.getElementById('addBtn').innerText='Add Patient';
}

function editPatient(index){
    let patients = JSON.parse(localStorage.getItem('patients') || '[]');
    let p = patients[index];
    ['name','age','gender','email','contact','blood','address','history'].forEach(id=>document.getElementById(id).value=p[id]);
    editingIndex = index;
    document.getElementById('addBtn').innerText='Update Patient';
}

function deletePatient(index){
    if(confirm("Delete this patient?")){
        let patients = JSON.parse(localStorage.getItem('patients') || '[]');
        patients.splice(index,1);
        localStorage.setItem('patients',JSON.stringify(patients));
        loadPatients();
    }
}

document.getElementById('addBtn').onclick=()=>{
    let patient={};
    ['name','age','gender','email','contact','blood','address','history'].forEach(id=>{
        patient[id]=document.getElementById(id).value.trim();
    });
    if(!patient.name||!patient.age||!patient.gender||!patient.contact){
        alert('Please fill all required fields');
        return;
    }
    let patients = JSON.parse(localStorage.getItem('patients') || '[]');
    if(editingIndex!==null){
        patients[editingIndex]=patient;
    }else{
        patients.push(patient);
    }
    localStorage.setItem('patients',JSON.stringify(patients));
    clearForm();
    loadPatients();
}

// Initial load
loadPatients();
</script>

</body>
</html>
